- form_url  = @study.new_record? ? admin_studies_path : admin_study_path(@study)
- form_id   = @study.new_record? ? 'admin_new_study' : 'admin_edit_study'

= form_for @study, url: form_url, html: {class: 'form-horizontal validate-form', id: form_id} do |f|
  .row-fluid
    .control-group
      = f.label :irb_number, 'IRB number', class: 'control-label'
      .controls
        = f.text_field :irb_number, class: 'input-small required'
        %small.text-error
          %i Required field
    .control-group
      = f.label :name, class: 'control-label'
      .controls
        = f.text_field :name, class: 'input-xxlarge required'
        %small.text-error
          %i Required field
    .control-group
      = f.label :short_title, class: 'control-label'
      .controls
        = f.text_field :short_title, class: 'input-xxlarge required'
        %small.text-error
          %i Required field
    .control-group
      = f.label :sites, class: 'control-label'
      .controls
        = f.text_field :sites, class: 'input-xxlarge'
    .control-group
      = f.label :pi_name, 'PI Name', class: 'control-label'
      .controls
        = f.text_field :pi_name
    .control-group
      = f.label :pi_email, 'PI Email', class: 'control-label'
      .controls
        = f.text_field :pi_email
    .control-group
      = f.label :other_investigators, class: 'control-label'
      .controls
        = f.text_area :other_investigators, class: 'input-xxlarge', rows: 3
    .control-group
      = f.label :contact_name, class: 'control-label'
      .controls
        = f.text_field :contact_name
    .control-group
      = f.label :contact_email, class: 'control-label'
      .controls
        = f.text_field :contact_email
    .control-group
      = f.label :funding_source, class: 'control-label'
      .controls
        = f.text_field :funding_source, class: 'input-xxlarge'
    .control-group
      = f.label :start_date, class: 'control-label'
      .controls
        = f.text_field :start_date, class: 'input-small date', data: { provide: 'datepicker'}, placeholder: 'mm/dd/yyyy'
    .control-group
      = f.label :end_date, class: 'control-label'
      .controls
        = f.text_field :end_date, class: 'input-small date', data: { provide: 'datepicker'}, placeholder: 'mm/dd/yyyy'
    .control-group
      = f.label :accrual_goal, 'Desired Sample Size', class: 'control-label'
      .controls
        = f.text_field :accrual_goal, class: 'input-mini'
    .control-group
      = f.label :min_age, class: 'control-label'
      .controls
        = f.text_field :min_age, class: 'input-mini'
    .control-group
      = f.label :max_age, class: 'control-label'
      .controls
        = f.text_field :max_age, class: 'input-mini'
    .control-group
      = f.label :inclusion_criteria, class: 'control-label'
      .controls
        = f.text_area :inclusion_criteria, class: 'wyswig'
    .control-group
      = f.label :exclusion_criteria, class: 'control-label'
      .controls
        = f.text_field :exclusion_criteria, class: 'wyswig'
    .control-group
      = f.label :website, class: 'control-label'
      .controls
        = f.text_field :website, class: 'input-xxlarge'
    .control-group
      = f.label :number_of_visits, class: 'control-label'
      .controls
        = f.text_field :number_of_visits, class: 'input-mini'
    .control-group
      = f.label :protocol_goals, class: 'control-label'
      .controls
        = f.text_field :protocol_goals, class: 'wyswig'
    .control-group
      = f.label :notes, class: 'control-label'
      .controls
        = f.text_area :notes, class: 'wyswig'
  .row-fluid
    .control-group
      .controls
        - button_label =  @study.new_record? ? 'Create' : 'Update'
        = f.button button_label, class: 'btn btn-success'
        = link_to 'Cancel', admin_studies_path, class: 'btn btn-warning'

