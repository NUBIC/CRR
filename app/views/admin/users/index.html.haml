%ul.nav.nav-tabs
  - searches = current_user.admin? ? Search.unscoped : Search.with_user(current_user)
  %li{class: "#{'active' if @state == 'active' || @state.blank?}"}
    = link_to "Active (#{User.active.count})", admin_users_path(state: 'active')
  %li{class: "#{'active' if @state == 'inactive'}"}
    = link_to "Inactive (#{User.inactive.count})", admin_users_path(state: 'inactive')

.tab-content
  #additonal-data{data: {header: "Users (#{User.all.size})", url: new_admin_user_path, target: '#users', async: true, text: 'Add an user'}}

  #users.row-fluid
    %table.table.table-bordered.table-hover#user_list
      %thead
        %tr
          %th Name
          %th NetID
          %th Admin
          %th Data Manager
          %th Researcher
          %th Studies
      %tbody
        - @users.each do |user|
          %tr
            %td
              = link_to user.full_name, edit_admin_user_path(user)
            %td
              = user.netid
            %td
              - if user.admin?
                .user-circle
            %td
              - if user.data_manager?
                .user-circle
            %td
              - if user.researcher?
                .user-circle
            %td
              %ul.unstyled
                - user.studies.each_with_index do |study,i|
                  %li{class: "#{'more_display' if i > 1}"}
                    = link_to study.display_name, admin_study_path(study)
                - if user.studies.size > 2
                  %li.pull-right.btn.btn-link.show_button
                    See more...
